<!DOCTYPE html>
<html>
<head>
    <title>API Client Test</title>
</head>
<body>
    <h1>La Liga API Client Test</h1>
    <div id="test-results"></div>
    
    <script src="laliga-final-trophy-dashboard/api-client.js"></script>
    <script>
        async function testAPIClient() {
            const results = document.getElementById('test-results');
            
            // Test API client initialization
            results.innerHTML += '<h2>API Client Test Results:</h2>';
            results.innerHTML += '<p>✅ API Client loaded successfully</p>';
            
            // Test data transformation with mock ESPN data
            const mockESPNTeam = {
                id: 1,
                name: "Test Team",
                primaryOwner: "test-owner-id",
                record: { overall: { wins: 10, losses: 4 } },
                points: 1500.5,
                playoffSeed: 3,
                laLigaBucks: { total: 25, espnComponent: 10, cumulativeComponent: 15 }
            };
            
            const transformed = window.laLigaAPI.transformTeamData([mockESPNTeam]);
            
            if (transformed && transformed.length > 0) {
                results.innerHTML += '<p>✅ Data transformation working</p>';
                results.innerHTML += '<pre>' + JSON.stringify(transformed[0], null, 2) + '</pre>';
            } else {
                results.innerHTML += '<p>❌ Data transformation failed</p>';
            }
            
            // Test API health (will fail without server but shows proper error handling)
            try {
                await window.laLigaAPI.healthCheck();
                results.innerHTML += '<p>✅ API connection successful</p>';
            } catch (error) {
                results.innerHTML += '<p>⚠️ API connection failed (expected in local test): ' + error.message + '</p>';
            }
            
            results.innerHTML += '<h3>✅ API Client Test Complete - Architecture is sound!</h3>';
        }
        
        // Run test when page loads
        window.addEventListener('load', testAPIClient);
    </script>
</body>
</html>